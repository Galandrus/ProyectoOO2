{"version":3,"sources":["refactorings/XPathInterpreter.js","PageSelector.js","components/ElementSelectionView.js","components/RenameElementView.js","refactorings/RenameElementRefactoring.js","components/RadioSet.js","components/TurnInputIntoRadiosView.js","refactorings/TurnInputIntoRadiosRefactoring.js","refactorings/AddDatePickerRefactoring.js","refactorings/DateInputIntoSelectsRefactoring.js","refactorings/AddAutocompleteRefactoring.js","components/RefactoringListView.js","content.js","index.js","refactorings/AddTooltipRefactoring.js","components/AddTooltipView.js","refactorings/UsabilityRefactoringOnElement.js","refactorings/UsabilityRefactoring.js","components/RefactoringView.js","components/RefactoringOnElementView.js"],"names":["XPathInterpreter","this","currentElement","xPaths","engine","FullXPathEngine","XPathSelectorEngine","BasicIdEngine","ControlTypeBasedEngine","ClassXPathEngine","CssPathEngine","prototype","setEngine","addEngine","engines","add","removeEngine","inlude","remove","indexOf","removeEngines","getMultipleFullPaths","element","parent","xPathArray","undefined","path","getPath","document","length","j","push","err","console","log","getMultipleRelativeXPaths","generatesSingleElemSelectors","i","suitableForRelative","constructor","name","getMultipleXPaths","ownerDocument","slice","lastIndexOf","getElementByXPath","xpath","node","doc","evaluate","singleNodeValue","getSingleElementByXpath","XPathResult","ANY_TYPE","iterateNext","getElementsByXpath","nodes","results","res","getElement","aNode","aExpr","xpe","defaultView","XPathEvaluator","nsResolver","createNSResolver","documentElement","result","found","id","nodeName","toLowerCase","xpaths","accumPathEnding","traversingElem","parentElement","className","trim","elemClass","tagName","elemClasses","split","elemPath","e","parentNode","paths","nodeType","index","sibling","previousSibling","pathIndex","splice","join","selector","getElementCSSSelector","localName","label","classList","item","querySelector","scrappers","XpathScrapper","getElements","elems","QuerySelectorScrapper","querySelectorAll","PageSelector","aComponent","selectableElemClass","onHoverHighlightClass","selectionClass","clearBackgroundClass","obfuscatedClass","onElementSelectionMessage","loadListeners","selectedElem","component","getSetOfXPathsByOccurrences","relativeElem","generateRelativeSelector","relativeElements","xpi","labeledXpaths","justFullPaths","matchingRelativeElem","contains","includes","elemsBySelector","addToExistingLabeledXpath","createNewLabeledXpath","ocurrences","me","selectionListener","evt","matchingElements","withParentElements","removeHighlightingOnHover","forEach","targetElem","removeStyleClass","onElementSelected","mouseEnterSelection","preventDefault","stopImmediatePropagation","addStyleClass","unshift","mouseLeaveSelection","preventAnyAction","preventActionsListener","hasAugmentedAction","executeAugmentedActions","target","type","getAllVisibleDomElements","getAllVisibleDomElementsButBody","getCurrentSidebarElements","highlightMatchingElements","data","selectMatchingElements","removeFullSelectionStyle","refElem","scrapper","refElemSelector","addSelectionClass","preventDomElementsBehaviour","preventFormsOnSubmit","elem","addEventListener","getEventsNamesToPrevent","eventToPrevent","form","onsubmit","restoreDomElementsBehaviour","removeAllAugmentedActions","removeEventListener","removeAugmentedActions","removeAttribute","getTargetElements","enableFullPathElementSelection","darkifyAllDomElements","lastUsedExtractor","scrapperClass","elements","targetElementSelector","onElementSelection","addSelectionListener","scoped","removeStyleOnSelection","undarkifySidebarElements","darkify","body","enableElementSelection","refElems","disableElementSelection","undarkifyAllDomElements","removeElemsHighlightingClass","removeHighlightingOnHoverFrom","undarkify","removeSelectableElemStyle","getAugmentedActions","actions","toUpperCase","event","params","listener","getAttribute","JSON","parse","isActionIncluded","existingAction","addAugmentedAction","action","setAttribute","stringify","onEvent","addHighlightingOnHover","addSelectableElemStyle","removeSelectionClass","removeClassFromMatchingElements","Promise","resolve","removeEventBlockers","hElems","addClassToMatchingElements","isAVisibleElement","style","display","getBoundingClientRect","width","addClearBackground","removeClearBackground","ElementSelectionView","props","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","elementXpath","refactoring","pageSelector","assertThisInitialized","targetElements","justFullPath","bind","handleBack","anElement","setState","setElement","goBack","_this2","react_default","a","createElement","build","onClick","getView","componentProps","React","Component","RenameElementView","elementName","handleChange","value","setNewName","RefactoringOnElementView","onChange","RenameElementRefactoring","innerHTML","newName","json","get","UsabilityRefactoringOnElement","RadioSet","handleOtherRadio","otherFreeInput","createRef","radioName","getRandomID","radios","values","map","renderRadio","labelPosition","ref","handler","radioLabel","cursor","radioInput","current","Math","random","toString","substring","TurnInputIntoRadiosView","handleOptionsDisplay","handleLabelPosition","valuesCollection","setValues","optionsDisplay","setOptionDisplay","setLabelPosition","checked","TurnInputIntoRadiosRefactoring","div","appendChild","ReactDOM","render","components_RadioSet","optionDisplay","aString","datepickerFactory","$","AddDatePickerRefactoring","datepicker","dateFormat","DateInputIntoSelectsRefactoring","transform","dateInput","submitFieldName","attr","dateDropdowns","AddAutocompleteRefactoring","Awesomplete","list","aList","RefactoringListView","refactorings","AddTooltipRefactoring","listItems","asString","Main","react__WEBPACK_IMPORTED_MODULE_5___default","react_frame_component__WEBPACK_IMPORTED_MODULE_6___default","head","rel","href","chrome","runtime","getURL","react_frame_component__WEBPACK_IMPORTED_MODULE_6__","_ref","window","route_lite__WEBPACK_IMPORTED_MODULE_10___default","_components_RefactoringListView__WEBPACK_IMPORTED_MODULE_9__","__webpack_require__","r","__webpack_exports__","react_dom__WEBPACK_IMPORTED_MODULE_0__","react_dom__WEBPACK_IMPORTED_MODULE_0___default","n","react__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_1___default","_content__WEBPACK_IMPORTED_MODULE_2__","app","onMessage","addListener","request","sender","sendResponse","message","require","jQuery","global","tooltipName","tipr","aTooltipName","AddTooltipView","_Users_jcgardey_Sites_refactoring_react_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_Users_jcgardey_Sites_refactoring_react_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_jcgardey_Sites_refactoring_react_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","_Users_jcgardey_Sites_refactoring_react_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","setTooltipName","react__WEBPACK_IMPORTED_MODULE_6___default","_RefactoringOnElementView__WEBPACK_IMPORTED_MODULE_7__","targetElement","newStyle","getStyleElement","UsabilityRefactoring","initialize","applyStyle","RefactoringView","handleSubmit","execute","refactoringUrl","location","replace","search","children","components_RefactoringView","getElementXpath"],"mappings":"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","file":"static/js/1.chunk.js","sourcesContent":["/*\n * Clase principal de entrada\n */\nfunction XPathInterpreter() {\n    this.currentElement = null;\n    this.xPaths = null;\n    this.engine = new FullXPathEngine();\n\n}\n// setear un unico engine de busqueda de xpath\nXPathInterpreter.prototype.setEngine = function(engine) {\n    this.engine = engine;\n    //this.engines = new array(engine);\n};\n\n// agregar un engine de busqueda de xpath a los existentes\nXPathInterpreter.prototype.addEngine = function(engine) {\n    this.engines.add(engine);\n};\n\n// borrar un engine de busqueda de xpaths\nXPathInterpreter.prototype.removeEngine = function(engine) {\n    if (this.engines.inlude(engine)){\n        this.engines.remove(this.engines.indexOf(engine));\n    }\n};\n\n// borrar todos los engine de busqueda de xpaths\nXPathInterpreter.prototype.removeEngines = function() {\n    this.engines = [];\n};\n\nXPathInterpreter.prototype.getMultipleFullPaths = function(element, parent) {\n    \n    var xPathArray = [];\n    if(element == undefined) return;\n\n    try{\n        var path = (new FullXPathEngine()).getPath(element, document);\n        if (path !== undefined && path !== null && path.length && path.length > 0){\n\n            for (var j = 0; j < path.length; j++) {\n                \n                xPathArray.push(path[j]);                        \n            } \n        }\n    }catch(err){ console.log(err); }\n\n    return xPathArray;\n};\n\nXPathInterpreter.prototype.getMultipleRelativeXPaths = function(element, parent, generatesSingleElemSelectors) {\n    \n    var xPathArray = [];\n    if(element == undefined || parent == undefined)\n        return;\n\n    for (var i = 0; i < this.engine.length; i++) {\n\n        if(this.engine[i].suitableForRelative() && (this.engine[i].generatesSingleElemSelectors() == generatesSingleElemSelectors)){\n            try{\n                var path = this.engine[i].getPath(element, parent);\n                console.log(this.engine[i].constructor.name, path);\n                if (path !== undefined && path !== null && path.length && path.length > 0){\n\n                    for (var j = 0; j < path.length; j++) {\n                        \n                        xPathArray.push(path[j]);                        \n                    } \n                }\n            }catch(err){ console.log(err); }\n        }\n    };\n\n    return xPathArray;\n};\n\n\n// obtener un array de xPaths correspondiente a los engines seteados\nXPathInterpreter.prototype.getMultipleXPaths = function(element, parent, generatesSingleElemSelectors) {\n    \n    var xPathArray = [];\n    if(element == undefined)\n        return;\n\n    if(parent == undefined)\n        parent = element.ownerDocument;\n\n\n    //var console = element.ownerDocument.defaultView.console; //.log(\"********************************\", element, parent);\n    for (var i = 0; i < this.engine.length; i++) {\n\n        //console.log(this.engine[i].constructor.name, this.engine[i].generatesSingleElemSelectors(), generatesSingleElemSelectors);\n        if(this.engine[i].generatesSingleElemSelectors() == generatesSingleElemSelectors){\n            try{\n                var path = this.engine[i].getPath(element, parent);\n                //console.log(this.engine[i].constructor.name, path);\n\n                if (path !== undefined && path !== null && path.length && path.length > 0){\n\n                    for (var j = 0; j < path.length; j++) {\n                        \n                        if(path[j] != null && path[j].indexOf('.//')>-1){\n                            xPathArray.push(path[j].slice(0,path[j].lastIndexOf(\"[\")));\n                        }\n                        \n                        xPathArray.push(path[j]);                        \n                    } \n                }\n            }catch(err){ console.log(err); }\n        }\n    };\n    return xPathArray;\n};\n\n// obtiene un xpath unico\nXPathInterpreter.prototype.getPath = function(element, parent) {\n    return this.engine.getPath(element, parent);\n    // return xPathArray;    \n};\n\nXPathInterpreter.prototype.getElementByXPath = function(xpath, node){\n    //WARNING: I THINK THIS IS NOT PROPERLY WORKING. USE -> getSingleElementByXpath\n    var doc = (node && node.ownerDocument)? node.ownerDocument : node;\n    return  doc.evaluate( xpath, doc, null, \n        9, null).singleNodeValue; // 9 = FIRST_ORDERED_NODE_TYPE*/\n}\nXPathInterpreter.prototype.getSingleElementByXpath = function(xpath, node) {\n\n    var doc = (node && node.ownerDocument)? node.ownerDocument : node;\n    var results = doc.evaluate(xpath, node, null, XPathResult.ANY_TYPE, null); \n    return results.iterateNext(); \n};\nXPathInterpreter.prototype.getElementsByXpath = function(xpath, node) {\n\n    var nodes = [];\n\n    try{\n        var doc = (node && node.ownerDocument)? node.ownerDocument : node;\n        var results = doc.evaluate(xpath, doc, null, XPathResult.ANY_TYPE, null); \n        var res = results.iterateNext(); \n\n        while (res) {\n          nodes.push(res);\n          res = results.iterateNext();\n        }\n    }catch(err){ console.log(err)}\n\n    return nodes;\n};\n\n\n/* \n * Clase strategy\n */\nfunction XPathSelectorEngine() {\n//    if ( arguments.callee.instance )    //Singleton pattern\n//        return arguments.callee.instance;\n//    arguments.callee.instance = this;\n}\n\n// Funcion para obtener elementos a partir de una expresion\n// antiguo evaluateXpath\n// recibe un nodo base o utiliza el documento\n// una expresion Xpath\nXPathSelectorEngine.prototype.getElement = function(aNode, aExpr) {\n   \n    var xpe = new aNode.defaultView.XPathEvaluator();\n    var nsResolver = xpe.createNSResolver(aNode.ownerDocument === null ?\n        aNode.documentElement : aNode.ownerDocument.documentElement);\n    var result = xpe.evaluate(aExpr, aNode, nsResolver, 0, null);\n    var found = [];\n    var res;\n    while (res = result.iterateNext())\n        found.push(res);\n    return found;\n};\nXPathSelectorEngine.prototype.suitableForRelative = function() {\n   \n    return false;\n};\nXPathSelectorEngine.prototype.generatesSingleElemSelectors = function() {\n   \n    return false;\n};\n\n\n/* \n * Estrategia por ID directo\n * Si no lo encuentra devuelve null\n */\nfunction BasicIdEngine() {\n\n}\n\n\nBasicIdEngine.prototype = new XPathSelectorEngine();\nBasicIdEngine.prototype.constructor = BasicIdEngine;\n\nBasicIdEngine.prototype.getPath = function(element, parent){\n\n    if (element && element.id){\n        return ['.//'+ element.nodeName.toLowerCase() +'[@id=\"' + element.id + '\"]']; \n    }else{\n        return; \n    }\n};\nBasicIdEngine.prototype.generatesSingleElemSelectors = function() {\n   \n    return true;\n};\n\n\n\n\nfunction ControlTypeBasedEngine() {\n\n}\nControlTypeBasedEngine.prototype = new XPathSelectorEngine();\nControlTypeBasedEngine.prototype.constructor = ControlTypeBasedEngine;\nControlTypeBasedEngine.prototype.getPath = function(element, parent){\n\n    if (!element) return;\n    \n    var xpaths = [];\n    var tagName = element.nodeName.toLowerCase();\n    var accumPathEnding = tagName;\n    var traversingElem = element;\n\n    while (traversingElem = traversingElem.parentElement){\n        if(traversingElem.className){\n            accumPathEnding = \"*[contains(@class, 'briefCitRow')]/\" + accumPathEnding;\n            break;\n        }\n        else{\n            accumPathEnding = traversingElem.nodeName.toLowerCase() + \"/\" + accumPathEnding;\n        }\n    }\n\n    if(accumPathEnding && accumPathEnding.trim() != \"*\")\n        xpaths.push(\".//\" + accumPathEnding);\n\n    return (xpaths.length && xpaths.length > 0)? xpaths:undefined;\n}\n\n/* \n * Función que obtiene un Xpath en relación a todos los elementos con la misma clase.\n */\nfunction ClassXPathEngine() {\n\n}\n\nClassXPathEngine.prototype = new XPathSelectorEngine();\nClassXPathEngine.prototype.constructor = ClassXPathEngine;\n\nClassXPathEngine.prototype.getPath = function(element, parent){\n\n    if (!element) return;\n    var elemClass = element.className;\n    if (!elemClass) return;\n    var tagName = element.nodeName.toLowerCase();\n    \n    // ESTO ES LO QUE DETERMINA COMO SERA EL XPATH -> VER VARIANTES\n    var xpaths = [], elemClasses = elemClass.split(\" \");\n\n    for (var i = 0; i < elemClasses.length; i++) {\n\n        var elemPath = \".//\"+tagName+\"[contains(@class, '\"+ elemClasses[i] +\"')]\";\n        var res = this.getElement(element.ownerDocument, elemPath);\n        for (var e in res){\n            if (res[e]==element){\n                xpaths.push(elemPath);\n                break;\n            }\n        }\n    }\n    return (xpaths.length && xpaths.length > 0)? xpaths:undefined;\n};\n\n\n/* \n * Estrategia xpath absoluto o full.\n * Funciona como el de firebug\n */\nfunction FullXPathEngine() {\n\n}\n\nFullXPathEngine.prototype = new XPathSelectorEngine();\nFullXPathEngine.prototype.constructor = FullXPathEngine;\n\nFullXPathEngine.prototype.suitableForRelative = function() {\n   \n    return true;\n};\n\n//Función que obtiene un Xpath según su FullPath de árbol DOM. \nFullXPathEngine.prototype.getPath = function(element, parentNode) {\n\n    if(element == undefined || parentNode == undefined)\n        return null;\n    var paths = [];\n    // Arma el path hasta llegar al parent node, que puede ser el parametro o \"document\"\n    for (   ;  \n            element && element.nodeType == 1 && element != parentNode; \n            element = element.parentNode) {\n        var index = 1;\n\n        // aumenta el indice para comparar con los hermanos superiores del elemento actual (del mismo tipo)\n        for (var sibling = element.previousSibling; sibling; sibling = sibling.previousSibling) {\n            if (sibling.nodeType == 10) //element.ownerDocument.defaultView.Node.DOCUMENT_TYPE_NODE\n                continue;\n            if (sibling.nodeName == element.nodeName)\n                index++;\n        }\n\n        var tagName = element.nodeName.toLowerCase();\n        var pathIndex = \"[\" + (index) + \"]\";\n        paths.splice(0, 0, tagName + pathIndex);\n    }\n    if(paths.length)\n        return [\".//\" + paths.join(\"/\")];\n    else return;\n};\n\n/* \n * Estrategia CSS path (Se traduce con jquery, $('csspath')\n */\nfunction CssPathEngine() {\n\n}\n\nCssPathEngine.prototype = new XPathSelectorEngine();\nCssPathEngine.prototype.constructor = CssPathEngine;\n\n//Función que obtiene un Xpath según su FullPath de árbol DOM. \nCssPathEngine.prototype.getPath = function(element, parent){\n    var paths = [];\n\n    for (; element && element.nodeType == 1; element = element.parentNode)\n    {\n        var selector = this.getElementCSSSelector(element);\n        paths.splice(0, 0, selector);\n    }\n\n    if(paths.length)\n        return paths.join(\" \");\n    else return;\n};\n\n//Funcion utilizada para obtener el selector de cada elemento\nCssPathEngine.prototype.getElementCSSSelector = function(element){\n    if (!element || !element.localName)\n        return null;\n\n    var label = element.localName.toLowerCase();\n    if (element.id)\n    label += \"#\" + element.id;\n\n    if (element.classList && element.classList.length > 0)\n    label += \".\" + element.classList.item(0);\n\n    return label;\n};\n\n\n//Sobre escribo la funcion del padre, porque esto no es un xpath!\nCssPathEngine.prototype.getElement = function(aNode, aExpr) {    \n    if (aNode){\n        return aNode.querySelector(aExpr);\n    }else{\n        return document.querySelector(aExpr);\n    }\n\n};\n\nexport default XPathInterpreter;\n\n","import XPathInterpreter from './refactorings/XPathInterpreter';\n\n//TODO: somehow, the file is realoded and that makes it impossible to remove listeners :(\nconsole.log(\"\\n\\n\\n********* LOADING THE 'PAGE SELECTOR' FILE *********\\n\\n\\n\");\n\n\nvar scrappers = { // Because we can not use window instead\n\t\"XpathScrapper\": function(){\n\t\tthis.getElements = function(selector){\n\t\t\treturn (new XPathInterpreter()).getElementsByXpath(selector, document);\n\t\t};\n\t\tthis.getElement = function(selector){\n\t\t\tif(selector == undefined)\n\t\t\t\treturn;\n\n\t\t\tvar elems = (new XPathInterpreter()).getElementsByXpath(selector, document);\n\t\t\treturn (elems && elems.length > 0)? elems[0] : undefined; //(new XPathInterpreter()).getElementByXPath(selector, document);\n\t\t};\n\t},\n\t\"QuerySelectorScrapper\": function(){\n\t\tthis.getElements = function(selector){\n\t\t\treturn document.querySelectorAll(selector);\n\t\t};\n\t\tthis.getElement = function(selector){\n\t\t\tif(selector == undefined)\n\t\t\t\treturn;\n\t\t\treturn document.querySelector(selector);\n\t\t};\n\t}\n}\n\nfunction PageSelector(aComponent){\n\t//this.createEventListeners();\n\tthis.selectableElemClass = \"andes-selectable\";\n\tthis.onHoverHighlightClass = \"andes-highlighted-on-hover\";\n\tthis.selectionClass = \"andes-selected\";\n\tthis.clearBackgroundClass = \"andes-clear-background\";\n\tthis.obfuscatedClass = \"andes-blurred\";\n\tthis.onElementSelectionMessage = null;\n\tthis.loadListeners();\n\tthis.selectedElem = null;\n\tthis.component = aComponent;\n};\nPageSelector.prototype.getSetOfXPathsByOccurrences = function(element, relativeElem, generateRelativeSelector, relativeElements){\n\n\tvar xpi = new XPathInterpreter(), labeledXpaths = {}, xpaths;\n\n\tif(this.justFullPaths){\n\t\t//Input y trigger\n\t\txpaths = xpi.getMultipleFullPaths(element, relativeElem);\n\t}\n\telse {\n\t\tif(generateRelativeSelector){\n\t\t\t// properties\n\t\t\tvar matchingRelativeElem;\n\t\t\tfor (var i = relativeElements.length - 1; i >= 0; i--) {\n\t\t\t\tif(relativeElements[i].contains(element)){\n\t\t\t\t\tmatchingRelativeElem = relativeElements[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(matchingRelativeElem)\n\t\t\t\txpaths = xpi.getMultipleRelativeXPaths(element, matchingRelativeElem, this.generatesSingleElemSelectors);\n\t\t\telse xpaths = [];\n\t\t}\n\t\telse{\n\t\t\tconsole.log(\"getMultipleXPaths\");\n\t\t\txpaths = xpi.getMultipleXPaths(element, element.ownerDocument, this.generatesSingleElemSelectors);\n\t\t}\n\t}\n\n\tif(xpaths && xpaths.length){\n\t    for (var i = xpaths.length - 1; i >= 0; i--) {\n\n\t    \tif(!xpaths[i].includes(\"andes-\")){\n\n\t\t        var elemsBySelector = xpi.getElementsByXpath(xpaths[i], element.ownerDocument).length;\n\t\t        if(elemsBySelector > 0){\n\n\t\t            if(labeledXpaths[elemsBySelector])\n\t\t            \tthis.addToExistingLabeledXpath(elemsBySelector, xpaths[i], labeledXpaths)\n\t\t            else this.createNewLabeledXpath(elemsBySelector, xpaths[i], labeledXpaths); \n\t\t        }\n\t\t    }\n\t    }\n\t}\n\n    return labeledXpaths;\n}\nPageSelector.prototype.addToExistingLabeledXpath = function(ocurrences, xpath, labeledXpaths){\n\n\tvar xpaths = labeledXpaths[ocurrences]; \n\t//console.log(\"existing\", xpaths, \" with \", xpath);\n\t\txpaths.push(xpath);\n\n\tlabeledXpaths[ocurrences] = xpaths; \n}\nPageSelector.prototype.createNewLabeledXpath = function(ocurrences, xpath, labeledXpaths){\n\n\tlabeledXpaths[ocurrences] = [xpath]; \n}\nPageSelector.prototype.loadListeners = function(){\n\t\n\tvar me = this;\n\n\tthis.selectionListener = function(evt){\n\n\t\tvar matchingElements = me.withParentElements(me.selectedElem);\n\n\t\tme.removeHighlightingOnHover(me.selectedElem); \n\t\tmatchingElements.forEach(targetElem => {\n\t\t\tme.removeStyleClass(targetElem, me.selectionClass);\n\t\t\tme.removeStyleClass(targetElem, me.clearBackgroundClass);\n\t\t});\n\n\n\t\tme.component.onElementSelected(me.selectedElem);\n\n\t\t/**me.generatePreview(me.selectedElem).then(function(preview){\n\n\t\t\tme.removeStyleClass(me.selectedElem, me.selectableElemClass);\n\t\t\tme.removeStyleClass(me.selectedElem, me.clearBackgroundClass);\n\n\t\t\tvar selectors = me.getSetOfXPathsByOccurrences(me.selectedElem, me.refElem, me.generateRelativeSelector, me.refElems);\n\t\t\t\n\t\t\tconsole.log(selectors);\n\t\t\tme.addStyleClass(me.selectedElem, me.selectableElemClass);\n\t\t\tme.addHighlightingOnHover(me.selectedElem);\n\n\t\t\tbrowser.runtime.sendMessage({\n\t\t\t\t\"call\": evt.params.onElementSelection,\n\t\t\t\t\"args\": {\n\t\t\t\t\t\"selectors\": selectors, \n\t\t\t\t\t\"previewSource\": preview,\n\t\t\t\t\t\"scoped\": evt.params.scoped,\n\t\t\t\t\t\"exampleValue\": (me.selectedElem.textContent)? me.selectedElem.textContent.trim() : \"\",\n\t\t\t\t\t\"call\": evt.params.onElementSelection\n\t\t\t\t}\n\t\t\t});\n\t\t})\t*/\n\t};\n\tthis.mouseEnterSelection = function(evt) {  \n\n\t\tevt.preventDefault(); evt.stopImmediatePropagation();\n\t\t//me.selectedElem = evt.target;\n\t\t//console.log(me.selectedElem);\n\t\tme.addStyleClass(this, me.onHoverHighlightClass);\n\t};\n\tthis.withParentElements = function(element){\n\n\t\tvar nodes = [];\n\t\tnodes.push(element);\n\t\twhile(element.parentNode) {\n\t\t    nodes.unshift(element.parentNode);\n\t\t    element = element.parentNode;\n\t\t}\n\t\treturn nodes;\n\t};\n\tthis.mouseLeaveSelection = function(evt) {  \n\n\t\tme.removeStyleClass(this, me.onHoverHighlightClass);\n\t\tevt.preventDefault(); evt.stopImmediatePropagation();\n\t};\n\tthis.preventAnyAction = function(evt){\n\t\t\n\t\tevt.preventDefault(); evt.stopImmediatePropagation();\n\t\treturn false; //This is for preventing anchors\n\t};\n\tthis.preventActionsListener = function(evt){\n\t\t\n\t\tevt.preventDefault(); evt.stopImmediatePropagation();\n\t\tme.selectedElem = this; //evt.target;\n\t\t\n\t\tif(me.selectedElem ) {\n\t\t\tif(me.hasAugmentedAction(me.selectedElem)){\n\t\t\t\tconsole.log(\"preventActionsListener\");\n\t\t\t\tme.executeAugmentedActions({\"target\": me.selectedElem, \"type\": evt.type});\n\t\t\t}\n\t\t} \n\n\t\treturn false; \n\t};\n};\nPageSelector.prototype.getAllVisibleDomElements = function(){\n\treturn document.querySelectorAll(\"body, input, div, a, img, span, label, ul, li, p, pre, cite, em\"); //:not(.first)\n};\nPageSelector.prototype.getAllVisibleDomElementsButBody = function(){\n\treturn document.querySelectorAll(\"div, input, a, img, span, label, ul, li, p, pre, cite, em, form, select, h1, h2, h3, h4, h5, h6\"); //:not(.first)\n};\nPageSelector.prototype.getCurrentSidebarElements = function(){\n\t\n\treturn document.querySelector(\"#refactoring-extension-root\").querySelectorAll(\"*\");\n};\nPageSelector.prototype.highlightMatchingElements = function(data){\n\n\t/*var elems = (new XPathInterpreter()).getElementsByXpath(data.xpath, document);\n\tfor (var i = elems.length - 1; i >= 0; i--) {\n\t\tthis.addSelectionClass(elems[i]);\n\t}*/\n};\nPageSelector.prototype.selectMatchingElements = function(data){\n\n\tif(data.removeFullSelectionStyle)\n\t\tthis.removeFullSelectionStyle();\n\t\n\tvar refElem = (data.scrapper && data.refElemSelector)? (new scrappers[data.scrapper]()).getElement(data.refElemSelector) : document;\n\n\tvar elems = (new XPathInterpreter()).getElementsByXpath(data.selector, refElem);\n\tfor (var i = elems.length - 1; i >= 0; i--) {\n\t\tthis.addSelectionClass(elems[i]);\n\t};\n};\nPageSelector.prototype.preventDomElementsBehaviour = function(){\n\n\tvar me=this;\n\tthis.preventFormsOnSubmit();\n\tthis.getAllVisibleDomElementsButBody().forEach(function(elem){\n\t\t\n\t\telem.addEventListener(\"click\", me.preventActionsListener, false);\n\t\tme.getEventsNamesToPrevent().forEach(function(eventToPrevent){\n\t\t\telem.addEventListener(eventToPrevent, me.preventAnyAction, false);\n\t\t});\n\t});\n};\nPageSelector.prototype.preventFormsOnSubmit = function(){\n\n\t//TODO: it is not working with \"addEventListener\". This is a problem because maybe we can not resore the original behaviour after this\n\tdocument.querySelectorAll(\"form\").forEach(function(form){ \n\t\tform.onsubmit = function(evt){ \n    \t\treturn false;\n\t\t}; \n    });\n}\nPageSelector.prototype.restoreDomElementsBehaviour = function(){\n\n\tthis.removeAllAugmentedActions();\n\n\tvar me=this; ///////THIS MAY BE A PROBLEM FOR THE SIDEBAR IF THIS METHOD IS CALLED IN THE MIDDLE OF THE PROCESS\n\tthis.getAllVisibleDomElementsButBody().forEach(function(elem){\n\n\t\telem.removeEventListener(\"click\", me.preventActionsListener, false);\n\t\tme.getEventsNamesToPrevent().forEach(function(eventToPrevent){\n\t\t\telem.removeEventListener(eventToPrevent, me.preventAnyAction, false);\n\t\t});\t\t\n\t\tme.removeHighlightingOnHover(elem);\n\t});\n\n\tthis.removeFullSelectionStyle();\n};\nPageSelector.prototype.removeAugmentedActions = function(elem){\n\t\n\telem.removeAttribute(\"andes-actions\");\n};\nPageSelector.prototype.removeAllAugmentedActions = function(elem){\n\t\n\tdocument.querySelectorAll(\"*[andes-actions]\").forEach(e => e.removeAttribute(\"andes-actions\"));\n};\nPageSelector.prototype.getEventsNamesToPrevent = function(){\n\t\n\treturn [\"click\", \"mouseup\", \"mousedown\"]; //, \"keydown\", \"keyup\", \"keypress\",\n};\nPageSelector.prototype.getTargetElements = function(selector){\n\t\n\treturn document.querySelectorAll(selector);\n};\nPageSelector.prototype.enableFullPathElementSelection = function(data){\n\n\tthis.darkifyAllDomElements();\n\tthis.preventFormsOnSubmit();\n\n\tthis.lastUsedExtractor = new scrappers[data.scrapperClass]();\n\tthis.generatesSingleElemSelectors = data.generatesSingleElemSelectors;\n\tvar elements = this.lastUsedExtractor.getElements(data.targetElementSelector);\n\tthis.refElem = this.lastUsedExtractor.getElement(data.refElemSelector);\n\n\tthis.onElementSelectionMessage = data.onElementSelection;\n\n    this.addSelectionListener(\n    \telements, \n    \tdata.onElementSelection, \n    \t\"click\", \n    \tdata.scoped,\n    \tdata.removeStyleOnSelection,\n    \tdata.generateRelativeSelector,\n    \tdata /*este solo es laposta*/\n    );\n    this.undarkifySidebarElements();\n    this.darkify(document.body); \n};\nPageSelector.prototype.enableElementSelection = function(data){\n\n\tthis.darkifyAllDomElements();\n\tthis.preventFormsOnSubmit();\n\n\tthis.lastUsedExtractor = new scrappers[data.scrapperClass]();\n\tthis.generatesSingleElemSelectors = data.generatesSingleElemSelectors;\n\tvar elements = this.lastUsedExtractor.getElements(data.targetElementSelector);\n\tthis.refElem = this.lastUsedExtractor.getElement(data.refElemSelector);\n\tthis.refElems = this.lastUsedExtractor.getElements(data.refElemSelector);\n\tthis.onElementSelectionMessage = data.onElementSelection;\n\tthis.justFullPaths = data.justFullPaths;\n\n    this.addSelectionListener(\n    \telements, \n    \tdata.onElementSelection, \n    \t\"click\", \n    \tdata.scoped,\n    \tdata.removeStyleOnSelection,\n    \tdata.generateRelativeSelector,\n    \tdata /*este solo es laposta*/\n    );\n    this.undarkifySidebarElements();\n    this.darkify(document.body); \n};\nPageSelector.prototype.disableElementSelection = function(data){\n\n\tthis.undarkifyAllDomElements();\n\tthis.removeElemsHighlightingClass(data.selector);\n\tthis.removeHighlightingOnHoverFrom(data.selector);\n    this.removeAllAugmentedActions(); //TODO: do not just remove. add a default action (prevent)\n};\nPageSelector.prototype.darkifyAllDomElements = function(){\n\n\tvar me = this, elems = this.getAllVisibleDomElements(); \n\telems.forEach(function(elem) { \n\t\tme.darkify(elem);\n    });\n}\nPageSelector.prototype.undarkifyAllDomElements = function(){\n\n\tvar me = this, elems = this.getAllVisibleDomElements(); \n\telems.forEach(function(elem) { \n\t\tme.undarkify(elem);\n    });\n}\nPageSelector.prototype.removeElemsHighlightingClass = function(selector){\n\n\tvar me = this, elems = this.lastUsedExtractor.getElements(selector); \n\telems.forEach(function(elem) { \n\t\tme.removeSelectableElemStyle(elem);\n    });\n}\nPageSelector.prototype.hasAugmentedAction = function(target){\n\n\treturn (this.getAugmentedActions(target).length > 0);\t\n}\nPageSelector.prototype.executeAugmentedActions = function(evt){\n\n\tvar actions = this.getAugmentedActions(evt.target);\n\t\n\tfor (var i = actions.length - 1; i >= 0; i--) {\n\t\tif(evt.type.toUpperCase() == actions[i].event.toUpperCase()){\n\t\t\tevt.params = actions[i].params;\n\t\t\tthis[actions[i].listener](evt); //e.g. \n\t\t}\n\t}\n}\nPageSelector.prototype.getAugmentedActions = function(elem){\n\n\tif (elem){\n\t\tvar actions = elem.getAttribute(\"andes-actions\");\n\t\tif (actions && actions.length)\n\t\t\treturn actions=JSON.parse(actions);\n\t}\n\treturn [];\n}\nPageSelector.prototype.isActionIncluded = function(existingAction, actions){\n\n\tfor (var i = actions.length - 1; i >= 0; i--) {\n\t\tif(actions[i].listener == existingAction.listener && actions[i].listener == existingAction.listener){\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\nPageSelector.prototype.addAugmentedAction = function(elem, action, params){\n\n\tvar actions = this.getAugmentedActions(elem);\n\tif(!this.isActionIncluded(action, actions)) {\n\t\tactions.push(action);\n\t\telem.setAttribute(\"andes-actions\", JSON.stringify(actions));\n\t}\n}\nPageSelector.prototype.addSelectionListener = function(elements, onElementSelection, onEvent, scoped, \n\tremoveStyleOnSelection, generateRelativeSelector, data){\n\n\tvar me = this;\n\n\t\tthis.removeStyleOnSelection = removeStyleOnSelection;\n\t\tthis.scoped = scoped;\n\t\tthis.generateRelativeSelector = generateRelativeSelector;\n\n\telements.forEach(function(elem) { \n\t\tme.undarkify(elem);\t\n\t\tme.addHighlightingOnHover(elem);\n\t\tme.addSelectableElemStyle(elem);\n\t\tme.addAugmentedAction(elem, {\n\t\t\t\"listener\": \"selectionListener\", \n\t\t\t\"event\": onEvent, \n\t\t\t\"params\": data\n\t\t});\n    });\t\n}\n\nPageSelector.prototype.addHighlightingOnHover = function(elem){\n\telem.addEventListener(\"mouseover\", this.mouseEnterSelection, false);\n\telem.addEventListener(\"mouseleave\", this.mouseLeaveSelection, false);\n}\nPageSelector.prototype.removeHighlightingOnHover = function(elem){\n\n\telem.removeEventListener(\"mouseover\", this.mouseEnterSelection, false);\n\telem.removeEventListener(\"mouseleave\", this.mouseLeaveSelection, false);\n\tthis.removeStyleClass(elem, this.onHoverHighlightClass);\n}\nPageSelector.prototype.addSelectableElemStyle = function(elem){\n\n\tthis.addStyleClass(elem, this.selectableElemClass);  \n}\nPageSelector.prototype.addSelectionClass = function(elem){\n\n\tthis.addStyleClass(elem, this.selectionClass);  \n}\nPageSelector.prototype.removeSelectionClass = function(elem){\n\n\tthis.removeStyleClass(elem, this.selectionClass);  \n}\nPageSelector.prototype.removeFullSelectionStyle = function(){\n\n\tthis.removeClassFromMatchingElements(this.obfuscatedClass);\n\tthis.removeClassFromMatchingElements(this.selectableElemClass);\n\tthis.removeClassFromMatchingElements(this.onHoverHighlightClass);\n\tthis.removeClassFromMatchingElements(this.clearBackgroundClass);\n\tthis.removeClassFromMatchingElements(this.selectionClass);\n\t//this.restoreDomElementsBehaviour();\n\n\treturn Promise.resolve();\n}\nPageSelector.prototype.removeHighlightingOnHoverFrom = function(selector){\n\t\n\tthis.selectedElem = undefined;\n\n\tvar me = this;\n\t(this.lastUsedExtractor.getElements(selector)).forEach(function(elem){\n\t\tme.removeHighlightingOnHover(elem);\n\t});\n}\nPageSelector.prototype.removeEventBlockers = function(){\n\n\tconsole.log(\"Removing event blockers\");\n}\nPageSelector.prototype.removeClassFromMatchingElements = function(className){\n\n\tvar hElems = document.querySelectorAll(\".\" + className);\n\t\thElems.forEach(e => e.classList.remove(className));\n\treturn hElems;\n}\nPageSelector.prototype.addClassToMatchingElements = function(elems, className){\n\n\tfor (var i = 0; i < elems.length; i++) {\n\t\tthis.addStyleClass(elems[i], className);\n\t}\n\treturn elems;\n}\nPageSelector.prototype.undarkifySidebarElements = function(){\n\n\tvar me = this;\n\tthis.getCurrentSidebarElements().forEach(function(elem) { \n\t\tme.undarkify(elem);\t\t\n    });\n}\nPageSelector.prototype.isAVisibleElement = function(elem){\n\n\treturn (elem.style.display != \"none\" && elem.getBoundingClientRect().width != 0)? true : false;\n}\nPageSelector.prototype.darkify = function(elem){\n\n\tthis.addStyleClass(elem, this.obfuscatedClass);\n};\nPageSelector.prototype.addClearBackground = function(elem){\n\t\n\tthis.addStyleClass(elem, this.clearBackgroundClass);\n};\nPageSelector.prototype.addStyleClass = function(elem, className){\n\n\tif(elem.classList && !elem.classList.contains(className)){\n\t\telem.classList.add(className);\n\t}\n};\nPageSelector.prototype.removeStyleClass = function(elem, className){\n\t\n\tif(elem && elem.classList && elem.classList.contains(className)){\n\t\telem.classList.remove(className);\n\t}\n};\nPageSelector.prototype.undarkify = function(elem){\n\t\n\tthis.removeStyleClass(elem, this.obfuscatedClass);\n};\nPageSelector.prototype.removeSelectableElemStyle = function(elem){\n\t\n\tthis.removeStyleClass(elem, this.selectableElemClass);\t\n};\nPageSelector.prototype.removeClearBackground = function(elem){\n\t\n\tthis.removeStyleClass(elem, this.clearBackgroundClass);\t\n};\n\nexport default PageSelector;","import React from 'react';\nimport PageSelector from '../PageSelector';\nimport XPathInterpreter from '../refactorings/XPathInterpreter';\nimport {goBack, Link} from 'route-lite';\n\nclass ElementSelectionView extends React.Component {\n\n    constructor (props) {\n        super(props);\n        this.state = {elementXpath: \"\"};\n        this.refactoring = new this.props.refactoring();\n        this.pageSelector = new PageSelector (this);\n        this.pageSelector.enableElementSelection({\n            \"scrapperClass\": \"QuerySelectorScrapper\",\n            \"targetElementSelector\": this.refactoring.targetElements(),\n            \"onElementSelection\": \"onElementSelection\",\n            \"justFullPath\": true\n        });\n        this.pageSelector.preventDomElementsBehaviour();\n\n        this.disableElementSelection = this.disableElementSelection.bind(this);\n        this.handleBack = this.handleBack.bind(this);\n    }\n\n\n    onElementSelected(anElement) {\n        const elementXpath = (new XPathInterpreter()).getPath(anElement, document.body)[0];\n        this.setState({elementXpath: elementXpath});\n        this.refactoring.setElement(elementXpath);\n    }\n\n    disableElementSelection() {\n        this.pageSelector.restoreDomElementsBehaviour();\n    }\n\n    handleBack() {\n        this.disableElementSelection();\n        goBack();\n    }\n\n    render () {\n        return (\n        <div className={\"row\"}>\n            <div className={\"col-md-12\"}>\n                <h2>Select an Element</h2>\n                <div className={'form-group'}>\n                    <p>Target Element <span>{this.state.elementXpath}</span></p>\n                </div>\n                <div className={'form-group'}>\n                    <Link onClick={this.disableElementSelection} className={'btn btn-warning'} component={this.refactoring.getView()} componentProps={{\"refactoring\": this.refactoring}}>Continue</Link>\n                </div>\n                <div className={'form-group'}>\n                    <Link className={'btn btn-secondary'} onClick={() => this.handleBack()}>Back</Link>\n                </div>\n            </div>\n        </div>\n\n        );\n    }\n\n\n}\n\nexport default ElementSelectionView;","import React from 'react';\nimport RefactoringOnElementView from './RefactoringOnElementView';\n\nclass RenameElementView extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {elementName: ''};\n        this.handleChange = this.handleChange.bind(this);\n        this.refactoring = this.props.refactoring;\n    }\n\n    handleChange(event) {\n        this.setState({elementName: event.target.value});\n        this.refactoring.setNewName(this.state.elementName);\n    }\n\n\n    render () {\n        return (\n            <RefactoringOnElementView refactoring={this.refactoring}>\n                <div className={'form-group'}>\n                    <label>Element Name</label>\n                    <input type={'text'} className={'form-control'} id={'uxpainter-element-name'} onChange={this.handleChange}/>\n                </div>\n            </RefactoringOnElementView>\n        )\n    }\n\n}\n\nexport default RenameElementView;","import UsabilityRefactoringOnElement from './UsabilityRefactoringOnElement.js';\nimport RenameElementView from '../components/RenameElementView';\n\nclass RenameElementRefactoring extends UsabilityRefactoringOnElement {\n    constructor () {\n        super();\n    }\n\n    transform () {\n        const anElement = this.getElement();\n        if (anElement !== \"undefined\") {\n            anElement.innerHTML = this.newName;\n        }\n    }\n\n    setNewName (newName) {\n        this.newName = newName;\n    }\n\n    serialize () {\n        let json = super.serialize();\n        json.newName = this.newName;\n        return json;\n    }\n\n    targetElements () {\n        return \"a, button, input[type='button'], input[type='submit'], span, p, h1, h2, h3, h4, h5, h6\";\n    }\n\n    getView () {\n        return RenameElementView;\n    }\n\n    static asString () {\n        return \"Rename Element\";\n    }\n\n}\n\nexport default RenameElementRefactoring;\n\n\n","import React from 'react';\n\nclass RadioSet extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleChange = this.handleChange.bind(this);\n        this.handleOtherRadio = this.handleOtherRadio.bind(this);\n        this.otherFreeInput = React.createRef();\n    }\n\n    render () {\n        const radioName = this.getRandomID();\n        const me = this;\n        const radios = this.props.values.map((value, i) => {\n            return <p style={{display: me.props.display}}>\n                {me.renderRadio(value,radioName, me.props.labelPosition, this.handleChange)}\n            </p>\n        });\n\n        return (\n            <div className={'uxpainter-radio-set'}>\n                {radios}\n                {this.renderRadio('Other', radioName, this.props.labelPosition, this.handleOtherRadio)}\n                <input type={'text'} style={{display:\"none\"}} onChange={this.handleChange} ref={this.otherFreeInput}/>\n            </div>\n        )\n    }\n\n    renderRadio(value, name, labelPosition, handler) {\n        const radioLabel = <label style={{cursor:'pointer'}}>{value}</label>\n        const radioInput = <input type={'radio'} value={value} name={name} onChange={handler}/>\n        return (labelPosition == \"left\")? [radioInput,radioLabel]:[radioLabel,radioInput]\n    }\n\n    handleChange(event) {\n        this.props.refactoring.getElement().value = event.target.value;\n        if (event.target.type == \"radio\") {\n            this.otherFreeInput.current.style.display = \"none\";\n        }\n    }\n\n    handleOtherRadio() {\n        this.props.refactoring.getElement().value = \"\";\n        this.otherFreeInput.current.style.display = \"inline\";\n    }\n\n    getRandomID() {\n        return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n    }\n\n}\n\nexport default RadioSet;","import RefactoringOnElementView from \"./RefactoringOnElementView\";\nimport React from \"react\";\n\nclass TurnInputIntoRadiosView extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.handleChange = this.handleChange.bind(this);\n        this.handleOptionsDisplay = this.handleOptionsDisplay.bind(this);\n        this.handleLabelPosition = this.handleLabelPosition.bind(this);\n        this.refactoring = this.props.refactoring;\n    }\n\n\n    handleChange(event) {\n        const valuesCollection = event.target.value.split(\",\");\n        this.setState({values: valuesCollection});\n        this.refactoring.setValues(valuesCollection);\n    }\n\n    handleOptionsDisplay(event) {\n        this.setState({\"optionsDisplay\": event.target.value});\n        this.refactoring.setOptionDisplay(event.target.value);\n    }\n\n    handleLabelPosition(event) {\n        this.setState({\"labelPosition\": event.target.value});\n        this.refactoring.setLabelPosition(event.target.value);\n    }\n\n    render () {\n        return (\n            <RefactoringOnElementView refactoring={this.refactoring}>\n                <div className={'form-group'}>\n                    <label>Values</label>\n                    <input type={'text'} className={'form-control'} onChange={this.handleChange}/>\n                </div>\n                <div className={'form-group'}>\n                    <p><label>Options Inline</label> <input type={'radio'} value={'inline-block'} name={'options_display'} onChange={this.handleOptionsDisplay}/></p>\n                    <p><label>Options in Block</label> <input type={'radio'} checked={true} value={'block'} name={'options_display'} onChange={this.handleOptionsDisplay}/></p>\n                </div>\n                <div className={'form-group'}>\n                    <p><label>Labels on the left</label> <input type={'radio'} value={'left'} name={'label_position'} onChange={this.handleLabelPosition}/></p>\n                    <p><label>Labels on the right</label> <input type={'radio'} value={'right'} checked={true} name={'label_position'} onChange={this.handleLabelPosition}/></p>\n                </div>\n            </RefactoringOnElementView>\n        )\n    }\n\n}\n\nexport default TurnInputIntoRadiosView;","import UsabilityRefactoringOnElement from './UsabilityRefactoringOnElement';\nimport ReactDOM from \"react-dom\";\nimport React from 'react';\nimport RadioSet from \"../components/RadioSet\";\nimport TurnInputIntoRadiosView from \"../components/TurnInputIntoRadiosView\";\n\nclass TurnInputIntoRadiosRefactoring extends UsabilityRefactoringOnElement {\n\n    setValues(values) {\n        this.values = values;\n    }\n\n    targetElements = function () {\n        return \"input[type='text']\";\n    };\n\n    transform () {\n        this.getElement().setAttribute(\"type\", \"hidden\");\n        const div = document.createElement(\"div\");\n        this.getElement().parentNode.appendChild(div);\n        ReactDOM.render(<RadioSet values={this.values} refactoring={this} display={this.optionDisplay} labelPosition={this.labelPosition}/>, div);\n    }\n\n    getView() {\n        return TurnInputIntoRadiosView;\n    }\n\n    setLabelPosition(aString) {\n        this.labelPosition = aString;\n    }\n\n    setOptionDisplay(aString) {\n        this.optionDisplay = aString;\n    }\n\n    static asString () {\n        return \"Turn Input into Radios\";\n    }\n\n}\n\nexport default TurnInputIntoRadiosRefactoring;\n\n\n\n\n\n\n\n\n","import UsabilityRefactoringOnElement from \"./UsabilityRefactoringOnElement\";\nimport RefactoringOnElementView from \"../components/RefactoringOnElementView\";\n\n\nimport $ from 'jquery';\nimport datepickerFactory from 'jquery-datepicker';\nimport 'jquery-ui-bundle/jquery-ui.css';\n\ndatepickerFactory($);\n\nclass AddDatePickerRefactoring extends UsabilityRefactoringOnElement {\n\n    transform () {\n        $(this.getElement()).datepicker({ dateFormat: \"d/m/y\" });\n    }\n\n    targetElements () {\n        return \"input[type='text']\";\n    }\n\n    getView() {\n        return RefactoringOnElementView;\n    }\n\n    static asString() {\n        return \"Add DatePicker\";\n    }\n\n}\n\nexport default AddDatePickerRefactoring;","import $ from 'jquery';\nimport 'jquery-datepicker/date-dropdowns';\nimport UsabilityRefactoringOnElement from './UsabilityRefactoringOnElement';\nimport RefactoringOnElementView from \"../components/RefactoringOnElementView\";\n\nclass DateInputIntoSelectsRefactoring extends UsabilityRefactoringOnElement {\n\n    transform = function () {\n        var dateInput = $(this.getElement());\n        if (typeof(dateInput[0]) != \"undefined\") {\n            var submitFieldName = dateInput.attr(\"name\");\n            dateInput.attr(\"name\", \"\");\n            dateInput.dateDropdowns({submitFieldName: submitFieldName});\n        }\n    }\n\n    getView() {\n        return RefactoringOnElementView;\n    }\n\n    static asString() {\n        return \"Date Input into Selects\";\n    }\n\n    targetElements() {\n        return \"input[type='text']\";\n    }\n\n}\n\nexport default DateInputIntoSelectsRefactoring;\n\n\n\n\n","import UsabilityRefactoringOnElement from \"./UsabilityRefactoringOnElement\";\nimport TurnInputIntoRadiosRefactoring from \"./TurnInputIntoRadiosRefactoring\";\n\nimport Awesomplete from 'awesomplete/awesomplete';\nimport 'awesomplete/awesomplete.css';\nimport TurnInputIntoRadiosView from \"../components/TurnInputIntoRadiosView\";\n\nclass AddAutocompleteRefactoring extends UsabilityRefactoringOnElement {\n\n    transform(){\n        new Awesomplete(this.getElement(), {list: this.values});\n    }\n\n    setValues(aList) {\n        this.values = aList;\n    }\n\n    getView() {\n        return TurnInputIntoRadiosView;\n    }\n\n    static asString() {\n        return \"Add Autocomplete\";\n    }\n\n    targetElements() {\n        return \"input[type='text']\";\n    }\n\n\n};\n\nexport default AddAutocompleteRefactoring;\n\n","import {Link} from \"route-lite\";\nimport ElementSelectionView from \"./ElementSelectionView\";\nimport RenameElementRefactoring from \"../refactorings/RenameElementRefactoring\";\nimport React from \"react\";\nimport AddTooltipRefactoring from \"../refactorings/AddTooltipRefactoring\";\nimport TurnInputIntoRadiosRefactoring from \"../refactorings/TurnInputIntoRadiosRefactoring\";\nimport AddDatePickerRefactoring from \"../refactorings/AddDatePickerRefactoring\";\nimport DateInputIntoSelectsRefactoring from \"../refactorings/DateInputIntoSelectsRefactoring\";\nimport AddAutocompleteRefactoring from \"../refactorings/AddAutocompleteRefactoring\";\n\nclass RefactoringListView extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.refactorings = [RenameElementRefactoring, AddTooltipRefactoring, TurnInputIntoRadiosRefactoring, AddDatePickerRefactoring, DateInputIntoSelectsRefactoring, AddAutocompleteRefactoring];\n    }\n\n    render () {\n        const listItems = this.refactorings.map((refactoring, i) => {\n            return <li><Link component={ElementSelectionView} componentProps={{refactoring: refactoring}}>{refactoring.asString()}</Link></li>\n        });\n        return ([\n                <h2 className={'text-center'}>Refactorings</h2>,\n                <ul>\n                    {listItems}\n                </ul>]\n        )\n    }\n}\n\nexport default RefactoringListView;","/*global chrome*/\n/* src/content.js */\nimport React from 'react';\nimport Frame, { FrameContextConsumer } from 'react-frame-component';\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"./content.css\";\nimport RefactoringListView from './components/RefactoringListView';\nimport Router from \"route-lite\";\n\nclass Main extends React.Component {\n\n    render() {\n        return (\n            <Frame head={[<link type=\"text/css\" rel=\"stylesheet\" href={chrome.runtime.getURL(\"/static/css/1.chunk.css\")} ></link>,\n                <link type=\"text/css\" rel=\"stylesheet\" href={chrome.runtime.getURL(\"/static/css/0.chunk.css\")} ></link>]}>\n                <FrameContextConsumer>\n                    {\n                        // Callback is invoked with iframe's window and document instances\n                        ({document, window}) => {\n                            // Render Children\n                            return (\n                                <div className={'ux-painter container'}>\n                                    <Router>\n                                        <RefactoringListView/>\n                                    </Router>\n                                </div>\n                            )\n                        }\n                    }\n                </FrameContextConsumer>\n            </Frame>\n        )\n    }\n}\n\nexport default Main;","/*global chrome*/\n\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport Main from './content'\nimport \"./index.css\"\n\nconst app = document.createElement('div');\napp.id = \"refactoring-extension-root\";\ndocument.body.appendChild(app);\nReactDOM.render(<Main />, app);\n\napp.style.display = \"none\";\nchrome.runtime.onMessage.addListener(\n    function(request, sender, sendResponse) {\n        if( request.message === \"clicked_browser_action\") {\n            toggle();\n        }\n    }\n);\n\nfunction toggle(){\n    if(app.style.display === \"none\"){\n        app.style.display = \"block\";\n    }else{\n        app.style.display = \"none\";\n    }\n}","import UsabilityRefactoringOnElement from \"./UsabilityRefactoringOnElement\";\nimport AddTooltipView from \"../components/AddTooltipView\";\nimport 'tipr/tipr/tipr.css';\nconst $ = require('jquery');\nwindow.jQuery = $;\nglobal.jQuery = $;\nrequire('tipr');\n\n\nclass AddTooltipRefactoring extends UsabilityRefactoringOnElement {\n\n    transform () {\n        if (this.getElement() !== undefined) {\n            this.getElement().className += \" tip\";\n            this.getElement().setAttribute(\"data-tip\", this.tooltipName);\n            $(this.getElement()).tipr();\n        }\n    }\n\n    setTooltipName (aTooltipName) {\n        this.tooltipName = aTooltipName;\n    }\n\n    targetElements () {\n        return \"a, div, img, input, span, p, button\";\n    }\n\n    serialize () {\n\n    }\n\n    getView () {\n        return AddTooltipView;\n    }\n\n    static asString () {\n        return \"Add Tooltip\";\n    }\n}\n\nexport default AddTooltipRefactoring;\n\n\n/**AddTooltipRefactoring.prototype.serialize = function () {\n    var json = UsabilityRefactoringOnElement.prototype.serialize.call(this);\n    json.tooltip = this.tooltipName;\n    return json;\n}\n\n*/\n\n\n","import React from 'react';\nimport RefactoringOnElementView from './RefactoringOnElementView';\n\nclass AddTooltipView extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {tooltipName: ''};\n        this.handleChange = this.handleChange.bind(this);\n        this.refactoring = this.props.refactoring;\n    }\n\n    handleChange(event) {\n        this.setState({tooltipName: event.target.value});\n        this.refactoring.setTooltipName(event.target.value);\n    }\n\n\n    render () {\n        return (\n            <RefactoringOnElementView refactoring={this.refactoring}>\n                <div className={'form-group'}>\n                    <label>Tooltip Name</label>\n                    <input type={'text'} className={'form-control'} onChange={this.handleChange}/>\n                </div>\n            </RefactoringOnElementView>\n        )\n    }\n\n}\n\nexport default AddTooltipView;","import XPathInterpreter from \"./XPathInterpreter\";\nimport UsabilityRefactoring from \"./UsabilityRefactoring\";\n\nclass UsabilityRefactoringOnElement extends UsabilityRefactoring {\n\n    constructor() {\n        super();\n    }\n\n    setElement(elementXpath) {\n        this.elementXpath = elementXpath;\n    }\n\n    getElementXpath () {\n        return this.elementXpath;\n    }\n\n    getElement() {\n        return new XPathInterpreter().getSingleElementByXpath(this.elementXpath, document.body);\n    }\n\n    initialize () {\n        this.targetElement = this.getElement();\n    }\n\n    serialize () {\n        let json = super.serialize();\n        json.elementXpath = this.elementXpath;\n        json.style = this.style;\n        return json;\n    }\n\n    isOnElement () {\n        return true;\n    }\n\n    setStyle (style) {\n        this.style = style;\n    }\n\n    getStyleElement () {\n        return this.targetElement;\n    }\n\n    applyStyle () {\n        if (!this.style) {\n            return\n        }\n        let newStyle = \"\";\n        if (!this.getStyleElement().getAttribute(\"style\")) {\n            newStyle = this.style;\n        }\n        else {\n            newStyle = \";\" + this.style;\n        }\n        this.getStyleElement().setAttribute(\"style\", newStyle);\n    }\n\n}\n\nexport default UsabilityRefactoringOnElement;","\nclass UsabilityRefactoring {\n    constructor () {}\n    initialize () {}\n    transform () {}\n    applyStyle () {}\n    static asString () {}\n\n    execute () {\n        this.initialize();\n        this.transform();\n        this.applyStyle();\n    }\n\n    isOnElement () {\n        return false;\n    }\n\n    serialize () {\n        return {\"refactoring\": this.constructor.name}\n    }\n\n    createRefactoring(json) {\n        return new window[json.refactoring](json);\n    }\n}\n\nexport default UsabilityRefactoring;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    \n\n\n\n\n\n\n\n\n\n","import React from 'react';\nimport { Link, goBack } from 'route-lite';\nimport RefactoringListView from \"./RefactoringListView\";\n\nclass RefactoringView extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.refactoring = this.props.refactoring;\n        this.handleSubmit = this.handleSubmit.bind(this);\n\n    }\n\n    handleSubmit() {\n        this.refactoring.execute();\n    }\n\n\n    render () {\n        const refactoringUrl = document.location.href.replace(document.location.search, \"\");\n        return (\n            <div className={\"row\"}>\n                <div className={'col-md-12'}>\n                    <h2>{this.refactoring.constructor.asString()}</h2>\n                    <input type={'hidden'} id={'url_for_instance'} value={refactoringUrl}/>\n                    {this.props.children}\n                    <div className={'form-group'}>\n                        <Link className={'btn btn-warning'} onClick={this.handleSubmit} component={RefactoringListView}>Refactor</Link>\n                    </div>\n                    <div className={'form-group'}>\n                        <Link className={'btn btn-secondary'} onClick={() => goBack()}>Back</Link>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n}\n\nexport default RefactoringView;","import React from 'react';\nimport RefactoringView from './RefactoringView';\n\nclass RefactoringOnElementView extends React.Component {\n\n    constructor (props) {\n        super(props);\n    }\n\n    render () {\n        return (\n            <RefactoringView refactoring={this.props.refactoring}>\n                <div className={'form-group'}>\n                    <label>Target Element</label>\n                    <p>{this.props.refactoring.getElementXpath()}</p>\n                </div>\n                {this.props.children}\n            </RefactoringView>\n        )\n    }\n}\n\nexport default RefactoringOnElementView"],"sourceRoot":""}